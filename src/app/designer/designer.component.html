<app-toolbar title="Designer" [showUploadButton]="true"></app-toolbar>
<cw-shoelace-context>
  <div class="grid grid-cols-4">
    <div class="row-span-3 p-2">
      <sl-input
        class="p-2"
        placeholder="Search..."
        size="small"
        (sl-input)="onInputChange($event)"
      >
        <sl-icon name="search" slot="prefix"></sl-icon>
      </sl-input>
      <div class="p-2">
        <div class="text-lg">Labels</div>
        <div class="ml-4">
          <button
            *ngFor="let label of labels$ | async"
            class="block overflow-ellipsis overflow-hidden whitespace-nowrap max-w-full"
            (click)="selectLabel(label)"
          >
            {{ label.title }}
          </button>
        </div>
      </div>
      <div class="p-2">
        <div class="text-lg">Exercises</div>
        <div class="ml-4">
          <button
            *ngFor="let exercise of exercises$ | async"
            class="block overflow-ellipsis overflow-hidden whitespace-nowrap max-w-full"
            (click)="selectExercise(exercise)"
          >
            {{ exercise.title }}
          </button>
        </div>
      </div>
    </div>
    <div class="row-span-3 col-span-2 p-4">
      <ng-container *ngIf="selection$ | async as selection">
        <app-exercise-preview
          *ngIf="selection.exercise as exercise"
          [exercise]="exercise"
          [labels]="(labelsOfSelectedExercise$ | async) ?? []"
          (labelClicked)="selectLabel($event)"
        ></app-exercise-preview>
        <app-label-preview
          *ngIf="selection.label as label"
          [label]="label"
          [subLabels]="(subLabelsOfSelectedLabel$ | async) ?? []"
          (labelClicked)="selectLabel($event)"
        ></app-label-preview>
      </ng-container>
    </div>
    <div class="row-span-3 p-4">
      <ng-container *ngIf="recentSelections$ | async as recentSelections">
        <ng-container *ngFor="let recentSelection of recentSelections">
          <ng-container *ngIf="recentSelection.exercise as exercise">
            <button
              class="block overflow-ellipsis overflow-hidden whitespace-nowrap max-w-full"
              (click)="selectExercise(exercise)"
            >
              {{ exercise.title }}
            </button>
          </ng-container>
          <ng-container *ngIf="recentSelection.label as label">
            <button
              class="block overflow-ellipsis overflow-hidden whitespace-nowrap max-w-full"
              (click)="selectLabel(label)"
            >
              {{ label.title }}
            </button>
          </ng-container>
        </ng-container>
      </ng-container>
    </div>
  </div>
</cw-shoelace-context>
